webpackJsonp([2],{XAGe:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=r("3cXf"),o=r.n(n),s=r("4YfN"),a=r.n(s),i=r("b8UZ"),u={name:"orders",data:function(){return{orderList:[],currentPage:1,pageSize:5}},computed:a()({},Object(i.c)(["user"]),{orderList2:function(){var e=(this.currentPage-1)*this.pageSize,t=this.currentPage*this.pageSize;return this.orderList.slice(e,t)}}),filters:{statusFliter:function(e){return 0==e?"未支付":1==e?"已完成":2==e?"已取消":void 0}},methods:{deleteOrder:function(e){var t=this;this.$confirm("此操作将永久删除该记录, 是否继续?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(function(){var r={userid:t.user.id,orderid:e},n=t.$loading({lock:!0,background:"rgba(0, 0, 0, 0.5)"});t.$axios.post("shop/order/deleteOrder",o()(r)).then(function(e){n.close(),e&&"20000"===e.resultCode?(t.getOrderList(),t.$notify({message:"订单删除成功。",type:"success"})):t.$notify({message:"订单删除失败。",type:"warning"})}).catch(function(e){n.close(),t.$notify({message:"订单删除接口报错。",type:"warning"})})}).catch(function(){t.$message({type:"info",message:"已取消删除"})})},goOrdersDetails:function(e){this.$router.push({path:"ordersDetails",query:{orderid:e}})},getOrderList:function(){var e=this,t="shop/order/getOrderList/"+this.user.id,r=this.$loading({lock:!0,background:"rgba(0, 0, 0, 0.5)"});this.$axios.get(t).then(function(t){r.close(),t&&"20000"===t.resultCode?e.orderList=t.result:e.$notify({message:"获取订单列表失败。",type:"warning"})}).catch(function(t){r.close(),e.$notify({message:"订单列表接口报错。",type:"warning"})})}},mounted:function(){},created:function(){this.getOrderList()}},c=r("W5g0"),l=Object(c.a)(u,function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",{staticClass:"articleBox fx-f1"},[r("el-table",{staticClass:"articleList",attrs:{data:e.orderList2,border:""}},[r("el-table-column",{attrs:{prop:"orderid",width:"360",label:"订单ID"}}),e._v(" "),r("el-table-column",{attrs:{prop:"amount",label:"总价(￥)"}}),e._v(" "),r("el-table-column",{attrs:{prop:"orderdate",label:"订单日期"}}),e._v(" "),r("el-table-column",{attrs:{prop:"status",label:"状态"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v("\n          "+e._s(e._f("statusFliter")(t.row.status))+"\n        ")]}}])}),e._v(" "),r("el-table-column",{attrs:{label:"操作"},scopedSlots:e._u([{key:"default",fn:function(t){return[r("el-button",{attrs:{type:"text"},on:{click:function(r){return e.goOrdersDetails(t.row.orderid)}}},[e._v("查看")]),e._v(" "),r("el-button",{attrs:{type:"text"},on:{click:function(r){return e.deleteOrder(t.row.orderid)}}},[e._v("删除")])]}}])})],1),e._v(" "),r("el-pagination",{attrs:{"current-page":e.currentPage,"page-size":e.pageSize,layout:"total, prev, pager, next",total:e.orderList.length},on:{"update:currentPage":function(t){e.currentPage=t},"update:current-page":function(t){e.currentPage=t}}})],1)},[],!1,null,null,null);t.default=l.exports}});
//# sourceMappingURL=2.f3e7fcd78df4262c53de.js.map