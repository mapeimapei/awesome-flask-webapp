{"version":3,"sources":["webpack:///src/views/blog/addSingle.vue","webpack:///./src/views/blog/addSingle.vue","webpack:///./src/views/blog/addSingle.vue?6e86"],"names":["blog_addSingle","name","data","postId","this","$route","query","id","addArticle","user_name","user_id","post_id","summary","content","rules","required","message","trigger","computed","extends_default","Object","vuex_esm","methods","getSingle","_this","apiUrl","loadingMask","$loading","lock","background","$axios","get","then","close","resultCode","result","$notify","type","catch","err","addSingle","_this2","user","obj","post","stringify_default","$router","push","submitForm","_this3","$refs","validate","valid","console","log","resetForm","resetFields","mounted","created","Component","component_normalizer","_vm","_h","$createElement","_c","_self","ref","staticClass","attrs","model","label-width","label-position","label","prop","value","callback","$$v","$set","expression","_v","on","click","$event","__webpack_exports__"],"mappings":"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","file":"vue/js/7.3fb7a48efe42aa80e632.js","sourcesContent":["<template>\n\t\t<el-form  :model=\"addArticle\" :rules=\"rules\" ref=\"addArticle\" label-width=\"100px\" class=\"addArticleBox fx-f1\" label-position=\"top\">\n\t\t\t<el-form-item label=\"文章名称\" prop=\"name\">\n\t\t\t\t<el-input v-model=\"addArticle.name\"></el-input>\n\t\t\t</el-form-item>\n\t\t\t\t<el-form-item label=\" 文章摘要\" prop=\"summary\">\n\t\t\t\t<el-input v-model=\"addArticle.summary\"></el-input>\n\t\t\t</el-form-item>\n\t\t\t<el-form-item label=\"正文内容\" prop=\"content\">\n\t\t\t\t<el-input type=\"textarea\" v-model=\"addArticle.content\"></el-input>\n\t\t\t</el-form-item>\n\t\t\t<el-form-item>\n\t\t\t\t<el-button @click=\"resetForm()\">重置</el-button>\n\t\t\t\t<el-button type=\"primary\" @click=\"submitForm\">提 交</el-button>\n\t\t\t</el-form-item>\n\t\t</el-form>\n</template>\n<script>\nimport { mapState } from 'vuex'\nexport default {\n  name:\"addSingle\",\n  data () {\n    return {\n        postId:this.$route.query.id || \"\",\n        addArticle: {\n          \"user_name\":\"\",\n          \"user_id\":\"\",\n          \"name\":\"\",\n          \"post_id\":\"\",\n          \"summary\":\"\",\n          \"content\":\"\",\n        },\n\t\t\t\trules:{\n\t\t\t\t\tname:[\n\t\t\t\t\t\t\t{ required: true, message: '请输入活动名称，此不能为空', trigger: 'blur' },\n          ],\n\t\t\t\t\tcontent:[\n\t\t\t\t\t\t{ required: true, message: '正文内容不能为空', trigger: 'blur' },\n\t\t\t\t\t],\n\n\t\t\t\t}\n    }\n  },\n\n  computed:{\n    ...mapState(\n          ['user']\n     )\n  },\n\n  methods:{\r\n\t\t\r\n\t\t//获取内容\r\n\t\tgetSingle(){\r\n\t\t\tif(!this.postId) return   // this.postId值为空，就跳出getSingle()，直接执行新增addSingle()。不为空，就是编辑，会执行下面的代码\r\n\t\t\t\r\n\t\t\tlet apiUrl = \"/getSingleById/\" + this.postId\r\n\t\t\tlet loadingMask = this.$loading({\r\n\t\t\t  lock: true,\r\n\t\t\t  background: 'rgba(0, 0, 0, 0.5)'\r\n\t\t\t});\r\n\r\n\t\t\tthis.$axios.get(apiUrl).then((data) => {\r\n\t\t\t  loadingMask.close();\r\n\t\t\t  if(!!data && data.resultCode ===\"20000\"){\r\n\t\t\t\t\t\tthis.addArticle.name =  data.result.name\r\n\t\t\t\t\t\tthis.addArticle.summary =  data.result.summary\r\n\t\t\t\t\t\tthis.addArticle.content =  data.result.content\r\n\t\t\t  }else{\r\n\t\t\t    this.$notify({\r\n\t\t\t      message: '获取文章列表失败。',\r\n\t\t\t      type: 'warning'\r\n\t\t\t    });\r\n\t\t\t  }\r\n\t\t\t}).catch((err) => {\r\n\t\t\t  loadingMask.close();\r\n\t\t\t  this.$notify({\r\n\t\t\t    message: '获取文章列表接口报错。',\r\n\t\t\t    type: 'warning'\r\n\t\t\t  });\r\n\t\t\t});\r\n\r\n\t\t},\r\n\t\t\r\n\t\t\r\n\t\t//新增\r\n\t\taddSingle(){\r\n\t\t  this.addArticle.user_name = this.user.name\r\n\t\t  this.addArticle.user_id = this.user.id\r\n\t\t  this.addArticle.post_id = this.postId\t\r\n\t\t  let obj = {...this.addArticle}\r\n\t\t  let apiUrl = \"/addSingle\"\r\n\t\t // var formData = new FormData();\r\n\t\t  //formData.append('requestJson', JSON.stringify(obj));\r\n\t\t  let loadingMask = this.$loading({\r\n\t\t    lock: true,\r\n\t\t    background: 'rgba(0, 0, 0, 0.5)'\r\n\t\t  });\r\n\t\t  this.$axios.post(apiUrl, JSON.stringify(obj)).then((data) => {\r\n\t\t    loadingMask.close();\r\n\t\t    if(!!data && data.resultCode ===\"20000\"){\r\n\t\t      this.$notify({\r\n\t\t        message: '文章添加成功。',\r\n\t\t        type: 'success'\r\n\t\t      })\r\n\t\t      this.$router.push('/index')\r\n\t\t    }else{\r\n\t\t      this.$notify({\r\n\t\t        message: '文章添加失败。',\r\n\t\t        type: 'warning'\r\n\t\t      });\r\n\t\t    }\r\n\t\t  }).catch((err) => {\r\n\t\t    loadingMask.close();\r\n\t\t    this.$notify({\r\n\t\t      message: '文章添加接口报错。',\r\n\t\t      type: 'warning'\r\n\t\t    });\r\n\t\t  });\r\n\t\t},\r\n\t\t\n\t\tsubmitForm() {\n        this.$refs[\"addArticle\"].validate((valid) => {\n          if (valid) {\n            this.addSingle()\n          } else {\n            console.log('error submit!!');\n            return false;\n          }\n        });\n      },\r\n\t\t\t\n      resetForm() {\n        this.$refs['addArticle'].resetFields();\n      }\n  },\n\n  mounted(){\n\n\n  },\r\n\t\r\n\tcreated(){\r\n\t\tthis.getSingle()  //获取内容\r\n\t}\n\n}\n</script>\n\n\n\n// WEBPACK FOOTER //\n// src/views/blog/addSingle.vue","/* script */\nexport * from \"!!babel-loader!../../../node_modules/_vue-loader@14.2.4@vue-loader/lib/selector?type=script&index=0!./addSingle.vue\"\nimport __vue_script__ from \"!!babel-loader!../../../node_modules/_vue-loader@14.2.4@vue-loader/lib/selector?type=script&index=0!./addSingle.vue\"\n/* template */\nimport {render as __vue_render__, staticRenderFns as __vue_static_render_fns__} from \"!!../../../node_modules/_vue-loader@14.2.4@vue-loader/lib/template-compiler/index?{\\\"id\\\":\\\"data-v-628878f0\\\",\\\"hasScoped\\\":false,\\\"optionsId\\\":\\\"0\\\",\\\"buble\\\":{\\\"transforms\\\":{}}}!../../../node_modules/_vue-loader@14.2.4@vue-loader/lib/selector?type=template&index=0!./addSingle.vue\"\n/* template functional */\nvar __vue_template_functional__ = false\n/* styles */\nvar __vue_styles__ = null\n/* scopeId */\nvar __vue_scopeId__ = null\n/* moduleIdentifier (server only) */\nvar __vue_module_identifier__ = null\nimport normalizeComponent from \"!../../../node_modules/_vue-loader@14.2.4@vue-loader/lib/runtime/component-normalizer\"\nvar Component = normalizeComponent(\n  __vue_script__,\n  __vue_render__,\n  __vue_static_render_fns__,\n  __vue_template_functional__,\n  __vue_styles__,\n  __vue_scopeId__,\n  __vue_module_identifier__\n)\n\nexport default Component.exports\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/views/blog/addSingle.vue\n// module id = null\n// module chunks = ","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('el-form',{ref:\"addArticle\",staticClass:\"addArticleBox fx-f1\",attrs:{\"model\":_vm.addArticle,\"rules\":_vm.rules,\"label-width\":\"100px\",\"label-position\":\"top\"}},[_c('el-form-item',{attrs:{\"label\":\"文章名称\",\"prop\":\"name\"}},[_c('el-input',{model:{value:(_vm.addArticle.name),callback:function ($$v) {_vm.$set(_vm.addArticle, \"name\", $$v)},expression:\"addArticle.name\"}})],1),_vm._v(\" \"),_c('el-form-item',{attrs:{\"label\":\" 文章摘要\",\"prop\":\"summary\"}},[_c('el-input',{model:{value:(_vm.addArticle.summary),callback:function ($$v) {_vm.$set(_vm.addArticle, \"summary\", $$v)},expression:\"addArticle.summary\"}})],1),_vm._v(\" \"),_c('el-form-item',{attrs:{\"label\":\"正文内容\",\"prop\":\"content\"}},[_c('el-input',{attrs:{\"type\":\"textarea\"},model:{value:(_vm.addArticle.content),callback:function ($$v) {_vm.$set(_vm.addArticle, \"content\", $$v)},expression:\"addArticle.content\"}})],1),_vm._v(\" \"),_c('el-form-item',[_c('el-button',{on:{\"click\":function($event){return _vm.resetForm()}}},[_vm._v(\"重置\")]),_vm._v(\" \"),_c('el-button',{attrs:{\"type\":\"primary\"},on:{\"click\":_vm.submitForm}},[_vm._v(\"提 交\")])],1)],1)}\nvar staticRenderFns = []\nexport { render, staticRenderFns }\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/_vue-loader@14.2.4@vue-loader/lib/template-compiler?{\"id\":\"data-v-628878f0\",\"hasScoped\":false,\"optionsId\":\"0\",\"buble\":{\"transforms\":{}}}!./node_modules/_vue-loader@14.2.4@vue-loader/lib/selector.js?type=template&index=0!./src/views/blog/addSingle.vue\n// module id = null\n// module chunks = "],"sourceRoot":""}