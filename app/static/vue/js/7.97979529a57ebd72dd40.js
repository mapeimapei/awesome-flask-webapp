webpackJsonp([7],{yLuR:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=r("3cXf"),n=r.n(i),s=r("4YfN"),a=r.n(s),l=r("b8UZ"),o={name:"addSingle",data:function(){return{postId:this.$route.query.id||"",addArticle:{user_name:"",user_id:"",name:"",post_id:"",summary:"",content:""},rules:{name:[{required:!0,message:"请输入活动名称，此不能为空",trigger:"blur"}],content:[{required:!0,message:"正文内容不能为空",trigger:"blur"}]}}},computed:a()({},Object(l.c)(["user"])),methods:{getSingle:function(){var e=this;if(this.postId){var t="cms/post/getSingleById/"+this.postId,r=this.$loading({lock:!0,background:"rgba(0, 0, 0, 0.5)"});this.$axios.get(t).then(function(t){r.close(),t&&"20000"===t.resultCode?(e.addArticle.name=t.result.name,e.addArticle.summary=t.result.summary,e.addArticle.content=t.result.content):e.$notify({message:"获取文章列表失败。",type:"warning"})}).catch(function(t){r.close(),e.$notify({message:"获取文章列表接口报错。",type:"warning"})})}},addSingle:function(){var e=this;this.addArticle.user_name=this.user.name,this.addArticle.user_id=this.user.id,this.addArticle.post_id=this.postId;var t=a()({},this.addArticle),r=this.$loading({lock:!0,background:"rgba(0, 0, 0, 0.5)"});this.$axios.post("cms/post/addSingle",n()(t)).then(function(t){r.close(),t&&"20000"===t.resultCode?(e.$notify({message:"成功。",type:"success"}),e.$router.push("/index")):e.$notify({message:"失败。",type:"warning"})}).catch(function(t){r.close(),e.$notify({message:"接口异常",type:"warning"})})},submitForm:function(){var e=this;this.$refs.addArticle.validate(function(t){if(!t)return console.log("error submit!!"),!1;e.addSingle()})},resetForm:function(){this.$refs.addArticle.resetFields()}},mounted:function(){},created:function(){this.getSingle()}},c=r("W5g0"),d=Object(c.a)(o,function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("el-form",{ref:"addArticle",staticClass:"addArticleBox fx-f1",attrs:{model:e.addArticle,rules:e.rules,"label-width":"100px","label-position":"top"}},[r("el-form-item",{attrs:{label:"文章名称",prop:"name"}},[r("el-input",{model:{value:e.addArticle.name,callback:function(t){e.$set(e.addArticle,"name",t)},expression:"addArticle.name"}})],1),e._v(" "),r("el-form-item",{attrs:{label:" 文章摘要",prop:"summary"}},[r("el-input",{model:{value:e.addArticle.summary,callback:function(t){e.$set(e.addArticle,"summary",t)},expression:"addArticle.summary"}})],1),e._v(" "),r("el-form-item",{attrs:{label:"正文内容",prop:"content"}},[r("el-input",{attrs:{type:"textarea"},model:{value:e.addArticle.content,callback:function(t){e.$set(e.addArticle,"content",t)},expression:"addArticle.content"}})],1),e._v(" "),r("el-form-item",[r("el-button",{on:{click:function(t){return e.resetForm()}}},[e._v("重置")]),e._v(" "),r("el-button",{attrs:{type:"primary"},on:{click:e.submitForm}},[e._v("提 交")])],1)],1)},[],!1,null,null,null);t.default=d.exports}});
//# sourceMappingURL=7.97979529a57ebd72dd40.js.map