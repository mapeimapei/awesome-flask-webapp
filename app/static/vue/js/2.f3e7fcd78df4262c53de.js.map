{"version":3,"sources":["webpack:///src/views/petStore/orders.vue","webpack:///./src/views/petStore/orders.vue","webpack:///./src/views/petStore/orders.vue?326d"],"names":["orders","name","data","orderList","currentPage","pageSize","computed","extends_default","Object","vuex_esm","orderList2","start","this","end","slice","filters","statusFliter","val","methods","deleteOrder","id","_this","$confirm","confirmButtonText","cancelButtonText","type","then","obj","userid","user","orderid","loadingMask","$loading","lock","background","$axios","post","stringify_default","close","resultCode","getOrderList","$notify","message","catch","err","$message","goOrdersDetails","$router","push","path","query","_this2","apiUrl","get","result","mounted","created","Component","component_normalizer","_vm","_h","$createElement","_c","_self","staticClass","attrs","border","prop","width","label","_v","scopedSlots","_u","key","fn","scope","_s","_f","row","status","on","click","$event","current-page","page-size","layout","total","length","update:currentPage","update:current-page","__webpack_exports__"],"mappings":"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","file":"vue/js/2.f3e7fcd78df4262c53de.js","sourcesContent":["<template>\n\t<div class=\"articleBox fx-f1\">\n\n\t\t<el-table\n      class=\"articleList\"\n      :data=\"orderList2\"\n      border>\n      <el-table-column\n        prop=\"orderid\"\n        width=\"360\"\n        label=\"订单ID\">\n      </el-table-column>\n\n      <el-table-column\n        prop=\"amount\"\n        label=\"总价(￥)\">\n      </el-table-column>\n\n      <el-table-column\n        prop=\"orderdate\"\n        label=\"订单日期\">\n      </el-table-column>\n\n      <el-table-column\n        prop=\"status\"\n        label=\"状态\">\n       <template slot-scope=\"scope\">\n          {{scope.row.status | statusFliter}}\n        </template>\n      </el-table-column>\n\n      <el-table-column\n        label=\"操作\">\n        <template slot-scope=\"scope\">\n          <el-button type=\"text\" @click=\"goOrdersDetails(scope.row.orderid)\">查看</el-button>\n          <el-button type=\"text\" @click=\"deleteOrder(scope.row.orderid)\">删除</el-button>\n        </template>\n      </el-table-column>\n    </el-table>\n\n    <!-- 分页 -->\n    <el-pagination\n    \t:current-page.sync=\"currentPage\"\n    \t:page-size=\"pageSize\"\n    \tlayout=\"total, prev, pager, next\"\n    \t:total=\"orderList.length\">\n    </el-pagination>\n\n\t</div>\n</template>\n<script>\nimport { mapState } from 'vuex'\nexport default {\n  name:\"orders\",\n  data () {\n    return {\n       orderList:[],\n       currentPage:1,\n       pageSize:5,\n    }\n  },\n  computed:{\n    ...mapState(\n          ['user']\n     ),\n\n     //分页\n     orderList2(){\n       let start = (this.currentPage-1)*this.pageSize\n       let end =this.currentPage*this.pageSize\n       return this.orderList.slice(start,end)\n     },\n\n  },\n\n  filters:{\n    statusFliter(val){\n      if(val == 0){\n        return \"未支付\"\n      }else if(val == 1){\n        return \"已完成\"\n      }else if(val == 2){\n        return \"已取消\"\n      }\n    }\n  },\n\n  methods:{\n\n    deleteOrder(id){\n      \n        this.$confirm('此操作将永久删除该记录, 是否继续?', '提示', {\n          confirmButtonText: '确定',\n          cancelButtonText: '取消',\n          type: 'warning'\n        }).then(() => {\n      \n          let obj = {\n            \"userid\":this.user.id,\n            \"orderid\":id\n          }\n          let apiUrl = \"shop/order/deleteOrder\"\n          let loadingMask = this.$loading({\n            lock: true,\n            background: 'rgba(0, 0, 0, 0.5)'\n          });\n          this.$axios.post(apiUrl, JSON.stringify(obj)).then((data) => {\n            loadingMask.close();\n            if(!!data && data.resultCode ===\"20000\"){\n              this.getOrderList()\n              this.$notify({\n                message: '订单删除成功。',\n                type: 'success'\n              })\n            }else{\n              this.$notify({\n                message: '订单删除失败。',\n                type: 'warning'\n              });\n            }\n          }).catch((err) => {\n            loadingMask.close();\n            this.$notify({\n              message: '订单删除接口报错。',\n              type: 'warning'\n            });\n          });\n          \n        }).catch(() => {\n          this.$message({\n            type: 'info',\n            message: '已取消删除'\n          });          \n        });\n      \n          \n    },\n\n\n    goOrdersDetails(id){\n      this.$router.push({path: 'ordersDetails', query:{orderid: id}})\n    },\n\n    getOrderList(){\n      let apiUrl = \"shop/order/getOrderList/\" + this.user.id\n      let loadingMask = this.$loading({\n        lock: true,\n        background: 'rgba(0, 0, 0, 0.5)'\n      });\n      this.$axios.get(apiUrl).then((data) => {\n        loadingMask.close();\n        if(!!data && data.resultCode ===\"20000\"){\n            this.orderList= data.result\n        }else{\n          this.$notify({\n            message: '获取订单列表失败。',\n            type: 'warning'\n          });\n        }\n      }).catch((err) => {\n        loadingMask.close();\n        this.$notify({\n          message: '订单列表接口报错。',\n          type: 'warning'\n        });\n      });\n    },\n\n  },\n\n  mounted(){\n  },\n  created(){\n    this.getOrderList()\n\n  }\n\n\n}\n</script>\n\n\n\n// WEBPACK FOOTER //\n// src/views/petStore/orders.vue","/* script */\nexport * from \"!!babel-loader!../../../node_modules/_vue-loader@14.2.4@vue-loader/lib/selector?type=script&index=0!./orders.vue\"\nimport __vue_script__ from \"!!babel-loader!../../../node_modules/_vue-loader@14.2.4@vue-loader/lib/selector?type=script&index=0!./orders.vue\"\n/* template */\nimport {render as __vue_render__, staticRenderFns as __vue_static_render_fns__} from \"!!../../../node_modules/_vue-loader@14.2.4@vue-loader/lib/template-compiler/index?{\\\"id\\\":\\\"data-v-4c18cf0d\\\",\\\"hasScoped\\\":false,\\\"optionsId\\\":\\\"0\\\",\\\"buble\\\":{\\\"transforms\\\":{}}}!../../../node_modules/_vue-loader@14.2.4@vue-loader/lib/selector?type=template&index=0!./orders.vue\"\n/* template functional */\nvar __vue_template_functional__ = false\n/* styles */\nvar __vue_styles__ = null\n/* scopeId */\nvar __vue_scopeId__ = null\n/* moduleIdentifier (server only) */\nvar __vue_module_identifier__ = null\nimport normalizeComponent from \"!../../../node_modules/_vue-loader@14.2.4@vue-loader/lib/runtime/component-normalizer\"\nvar Component = normalizeComponent(\n  __vue_script__,\n  __vue_render__,\n  __vue_static_render_fns__,\n  __vue_template_functional__,\n  __vue_styles__,\n  __vue_scopeId__,\n  __vue_module_identifier__\n)\n\nexport default Component.exports\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/views/petStore/orders.vue\n// module id = null\n// module chunks = ","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{staticClass:\"articleBox fx-f1\"},[_c('el-table',{staticClass:\"articleList\",attrs:{\"data\":_vm.orderList2,\"border\":\"\"}},[_c('el-table-column',{attrs:{\"prop\":\"orderid\",\"width\":\"360\",\"label\":\"订单ID\"}}),_vm._v(\" \"),_c('el-table-column',{attrs:{\"prop\":\"amount\",\"label\":\"总价(￥)\"}}),_vm._v(\" \"),_c('el-table-column',{attrs:{\"prop\":\"orderdate\",\"label\":\"订单日期\"}}),_vm._v(\" \"),_c('el-table-column',{attrs:{\"prop\":\"status\",\"label\":\"状态\"},scopedSlots:_vm._u([{key:\"default\",fn:function(scope){return [_vm._v(\"\\n          \"+_vm._s(_vm._f(\"statusFliter\")(scope.row.status))+\"\\n        \")]}}])}),_vm._v(\" \"),_c('el-table-column',{attrs:{\"label\":\"操作\"},scopedSlots:_vm._u([{key:\"default\",fn:function(scope){return [_c('el-button',{attrs:{\"type\":\"text\"},on:{\"click\":function($event){return _vm.goOrdersDetails(scope.row.orderid)}}},[_vm._v(\"查看\")]),_vm._v(\" \"),_c('el-button',{attrs:{\"type\":\"text\"},on:{\"click\":function($event){return _vm.deleteOrder(scope.row.orderid)}}},[_vm._v(\"删除\")])]}}])})],1),_vm._v(\" \"),_c('el-pagination',{attrs:{\"current-page\":_vm.currentPage,\"page-size\":_vm.pageSize,\"layout\":\"total, prev, pager, next\",\"total\":_vm.orderList.length},on:{\"update:currentPage\":function($event){_vm.currentPage=$event},\"update:current-page\":function($event){_vm.currentPage=$event}}})],1)}\nvar staticRenderFns = []\nexport { render, staticRenderFns }\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/_vue-loader@14.2.4@vue-loader/lib/template-compiler?{\"id\":\"data-v-4c18cf0d\",\"hasScoped\":false,\"optionsId\":\"0\",\"buble\":{\"transforms\":{}}}!./node_modules/_vue-loader@14.2.4@vue-loader/lib/selector.js?type=template&index=0!./src/views/petStore/orders.vue\n// module id = null\n// module chunks = "],"sourceRoot":""}