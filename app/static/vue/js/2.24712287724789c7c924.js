webpackJsonp([2],{XAGe:function(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=r("3cXf"),s=r.n(n),a=r("4YfN"),o=r.n(a),i=r("b8UZ"),u={name:"orders",data:function(){return{orderList:[],currentPage:1,pageSize:5}},computed:o()({},Object(i.c)(["user"]),{orderList2:function(){var t=(this.currentPage-1)*this.pageSize,e=this.currentPage*this.pageSize;return this.orderList.slice(t,e)}}),filters:{statusFliter:function(t){return 0==t?"未支付":1==t?"已完成":2==t?"已取消":void 0}},methods:{deleteOrder:function(t){var e=this;this.$confirm("此操作将永久删除该记录, 是否继续?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(function(){var r={user_id:e.user.id,orderid:t},n=e.$loading({lock:!0,background:"rgba(0, 0, 0, 0.5)"});e.$axios.post("/deleteOrder",s()(r)).then(function(t){n.close(),t&&"20000"===t.resultCode?(e.getOrderList(),e.$notify({message:"订单删除成功。",type:"success"})):e.$notify({message:"订单删除失败。",type:"warning"})}).catch(function(t){n.close(),e.$notify({message:"订单删除接口报错。",type:"warning"})})}).catch(function(){e.$message({type:"info",message:"已取消删除"})})},goOrdersDetails:function(t){this.$router.push({path:"ordersDetails",query:{orderid:t}})},getOrderList:function(){var t=this,e="/getOrderList/"+this.user.id,r=this.$loading({lock:!0,background:"rgba(0, 0, 0, 0.5)"});this.$axios.get(e).then(function(e){r.close(),e&&"20000"===e.resultCode?t.orderList=e.result:t.$notify({message:"获取订单列表失败。",type:"warning"})}).catch(function(e){r.close(),t.$notify({message:"订单列表接口报错。",type:"warning"})})}},mounted:function(){},created:function(){this.getOrderList()}},c=r("W5g0"),l=Object(c.a)(u,function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("div",{staticClass:"articleBox fx-f1"},[r("el-table",{staticClass:"articleList",attrs:{data:t.orderList2,border:""}},[r("el-table-column",{attrs:{prop:"orderid",width:"360",label:"订单ID"}}),t._v(" "),r("el-table-column",{attrs:{prop:"amount",label:"总价(￥)"}}),t._v(" "),r("el-table-column",{attrs:{prop:"orderdate",label:"订单日期"}}),t._v(" "),r("el-table-column",{attrs:{prop:"status",label:"状态"},scopedSlots:t._u([{key:"default",fn:function(e){return[t._v("\n          "+t._s(t._f("statusFliter")(e.row.status))+"\n        ")]}}])}),t._v(" "),r("el-table-column",{attrs:{label:"操作"},scopedSlots:t._u([{key:"default",fn:function(e){return[r("el-button",{attrs:{type:"text"},on:{click:function(r){return t.goOrdersDetails(e.row.orderid)}}},[t._v("查看")]),t._v(" "),r("el-button",{attrs:{type:"text"},on:{click:function(r){return t.deleteOrder(e.row.orderid)}}},[t._v("删除")])]}}])})],1),t._v(" "),r("el-pagination",{attrs:{"current-page":t.currentPage,"page-size":t.pageSize,layout:"total, prev, pager, next",total:t.orderList.length},on:{"update:currentPage":function(e){t.currentPage=e},"update:current-page":function(e){t.currentPage=e}}})],1)},[],!1,null,null,null);e.default=l.exports}});
//# sourceMappingURL=2.24712287724789c7c924.js.map