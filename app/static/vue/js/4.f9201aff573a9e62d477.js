webpackJsonp([4],{Quw4:function(t,e,o){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var s=o("3cXf"),n=o.n(s),a=o("4YfN"),r=o.n(a),i=o("b8UZ"),l={name:"login",components:{},data:function(){return{loginData:{account:"",passwd:""},rules:{account:[{required:!0,message:"请输入正确的账号或名称",trigger:"blur"}],passwd:[{required:!0,message:"密码不能为空",trigger:"blur"}]}}},computed:r()({},Object(i.c)(["user","token"])),watch:{},methods:r()({},Object(i.b)(["setUser","setToken"]),{loginFn:function(){var t=this,e=r()({},this.loginData),o=this.$loading({lock:!0,background:"rgba(0, 0, 0, 0.5)"});this.$axios.post("/user/login",e).then(function(e){if(o.close(),e&&"20000"===e.resultCode){t.setUser(e.result),t.setToken(e.result.token),localStorage.setItem("user",n()(e.result)),localStorage.setItem("token",e.result.token);var s=decodeURIComponent(t.$route.query.redirect||"/blog/post");t.$router.push({path:s}),t.$notify({message:"登录成功。",type:"success"})}else t.$notify({message:"账号或密码错误。",type:"warning"})}).catch(function(e){o.close(),t.$notify({message:"登录接口报错。",type:"warning"})})},submitForm:function(){var t=this;this.$refs.loginForm.validate(function(e){if(!e)return console.log("error submit!!"),!1;t.loginFn()})},resetForm:function(){this.$refs.loginForm.resetFields()}}),mounted:function(){},created:function(){},beforDestroy:function(){}},u=o("W5g0"),c=Object(u.a)(l,function(){var t=this,e=t.$createElement,o=t._self._c||e;return o("div",{staticClass:"loginBox"},[o("div",{staticClass:"pt60"},[o("div",{staticClass:"tx"},[t._v("欢迎登录")]),t._v(" "),o("el-form",{ref:"loginForm",staticClass:"loginData",attrs:{model:t.loginData,"status-icon":"",rules:t.rules,"label-width":"70px","label-position":"top"}},[o("el-form-item",{attrs:{label:"账号",prop:"account"}},[o("el-input",{attrs:{type:"text"},model:{value:t.loginData.account,callback:function(e){t.$set(t.loginData,"account",e)},expression:"loginData.account"}})],1),t._v(" "),o("el-form-item",{attrs:{label:"输入密码",prop:"passwd"}},[o("el-input",{attrs:{type:"password"},nativeOn:{keyup:function(e){return!e.type.indexOf("key")&&t._k(e.keyCode,"enter",13,e.key,"Enter")?null:t.submitForm(e)}},model:{value:t.loginData.passwd,callback:function(e){t.$set(t.loginData,"passwd",e)},expression:"loginData.passwd"}})],1),t._v(" "),o("el-form-item",[o("el-button",{on:{click:t.resetForm}},[t._v("重 置")]),t._v(" "),o("el-button",{attrs:{type:"primary"},on:{click:t.submitForm}},[t._v("登 录")])],1)],1)],1)])},[],!1,null,null,null);e.default=c.exports}});
//# sourceMappingURL=4.f9201aff573a9e62d477.js.map